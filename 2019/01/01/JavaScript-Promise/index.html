<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="嗨！大家好我是神Q超人！先前一陣子經過友人介紹認識了這個網站，但是由於先前已經有用習慣分享文章的平台，就遲遲未到此處發文，一直到參與完該平台舉辦的鐵人賽後，休息了好一陣子，最後沒有得獎也是很失落，於是想說在新的一年讓自己有個新開始！請大家多多指教！  認識 PromisePromise 是在 ES6 出現的語法，主要是針對 JavaScript 中非同步的執行緒做同步處理，所以在此之前，先來認識一">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript | 從Promise開始承諾的部落格生活">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;01&#x2F;01&#x2F;JavaScript-Promise&#x2F;index.html">
<meta property="og:site_name" content="神Ｑ超人">
<meta property="og:description" content="嗨！大家好我是神Q超人！先前一陣子經過友人介紹認識了這個網站，但是由於先前已經有用習慣分享文章的平台，就遲遲未到此處發文，一直到參與完該平台舉辦的鐵人賽後，休息了好一陣子，最後沒有得獎也是很失落，於是想說在新的一年讓自己有個新開始！請大家多多指教！  認識 PromisePromise 是在 ES6 出現的語法，主要是針對 JavaScript 中非同步的執行緒做同步處理，所以在此之前，先來認識一">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;i.imgur.com&#x2F;GG6Wxmt.png">
<meta property="og:updated_time" content="2019-10-23T04:25:41.751Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;i.imgur.com&#x2F;GG6Wxmt.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>JavaScript | 從Promise開始承諾的部落格生活</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ms314006" target="_blank" rel="noopener">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/01/07/React-Redux-MapStateToPrors/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2019/01/01/JavaScript-Promise/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&text=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&is_video=false&description=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=JavaScript | 從Promise開始承諾的部落格生活&body=Check out this article: http://yoursite.com/2019/01/01/JavaScript-Promise/" target="_blank" rel="noopener"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&name=JavaScript | 從Promise開始承諾的部落格生活&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#認識-Promise"><span class="toc-number">1.</span> <span class="toc-text">認識 Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#非同步"><span class="toc-number">1.1.</span> <span class="toc-text">非同步</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise-基本用法"><span class="toc-number">2.</span> <span class="toc-text">Promise 基本用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise-進階用法"><span class="toc-number">3.</span> <span class="toc-text">Promise 進階用法</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        JavaScript | 從Promise開始承諾的部落格生活
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">神Ｑ超人</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-01-01T14:02:10.000Z" itemprop="datePublished">2019-01-01</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/JavaScript/" rel="tag">JavaScript</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>嗨！大家好我是神Q超人！先前一陣子經過友人介紹認識了這個網站，但是由於先前已經有用習慣分享文章的平台，就遲遲未到此處發文，一直到參與完該平台舉辦的鐵人賽後，休息了好一陣子，最後沒有得獎也是很失落，於是想說在新的一年讓自己有個新開始！請大家多多指教！</p>
<hr>
<h2 id="認識-Promise"><a href="#認識-Promise" class="headerlink" title="認識 Promise"></a>認識 Promise</h2><p>Promise 是在 ES6 出現的語法，主要是針對 JavaScript 中非同步的執行緒做同步處理，所以在此之前，先來認識一下非同步是什麼意思。</p>
<h3 id="非同步"><a href="#非同步" class="headerlink" title="非同步"></a>非同步</h3><p>非同步處理方式會在不等待每一行的程式執行完成的狀態下不斷向下一行執行，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'init'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> func = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  str=<span class="string">'changed'</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">setTimeout(func,<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// ''</span></span><br></pre></td></tr></table></figure>

<p>以上的程式區段會以下列的順序做執行：</p>
<ol>
<li>宣告字串 <code>str</code>，並指派值為 <code>init</code>。</li>
<li>宣告方法 <code>func</code>，作用為改變字串 <code>str</code> 的值為 <code>changed</code>。</li>
<li>使用 <code>setTimeout</code> 在三秒後執行 <code>func</code> 改變 <code>str</code> 的值。</li>
<li>在 console 中印出字串 <code>str</code> 的值。</li>
</ol>
<p>關鍵就在上方的第 3 和第 4 步，在印出 <code>console.log</code> 時，程式並不會等到 <code>setTimeout</code> 執行完，而是 JacaScript 確認在第 3 步的 <code>setTimeout</code> 時，就會繼續向下執行程式，直到三秒後才回過頭執行 <code>func</code> 改變 <code>str</code> 的值。</p>
<p>雖然使用非同步可以讓執行速度不會因為某一行程式而卡住整個頁面，但有時候還是得先利用 ajax 獲取資料，再繼續執行處理資料的程式碼。</p>
<p>到這裡是不是有點熟悉？早在幾年前使用 JQuery 的 ajax 送出請求時就擁有了 async 這個屬性來處理這個狀況，當他被設定為 false 關閉非同步時，就得等 ajax 得到回應後，才會繼續執行下方的程式碼，就像下方例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 async 將 ajax 請求改為同步。</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  url: <span class="string">''</span>,</span><br><span class="line">  <span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">  success: <span class="function">(<span class="params">status</span>)=&gt;</span>&#123;    </span><br><span class="line">    data = status;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//data為statue</span></span><br><span class="line"><span class="built_in">console</span>.log(data);</span><br></pre></td></tr></table></figure>

<p>但因現今前端工程在網頁中的份量越來越重的關係，需要處理同步處理的地方也越來越多， Promise 就這樣誕生了。</p>
<hr>
<h2 id="Promise-基本用法"><a href="#Promise-基本用法" class="headerlink" title="Promise 基本用法"></a>Promise 基本用法</h2><p>如上段所說， Promise 是用來處理同步的部分，再說明用法前先來用圖片簡單瞭解一下原理：</p>
<p><img src="https://i.imgur.com/GG6Wxmt.png" alt=""></p>
<div style="display:flex; justify-content:center">
<a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">圖片來源：https://developer.mozilla.org</a>
</div>

<p>上圖為 Promise 的生命週期，每個 Promise 都會經過 pending 狀態，在 pending 後分別會有成功時走向的的 fulfill ，及失敗時的 reject ，並透過 <code>.then()</code> 在成功時接著處理資料，或是以 <code>.catch()</code> 做失敗時的應對，當然！不論是哪一條路，也可以再 return 一個新的 Promise 延續處理。</p>
<p>現在，來實作一個基本的 Promise ：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span>) &#123;</span><br><span class="line">      resolve(<span class="string">'changed'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    reject(<span class="string">'error'</span>);</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上方的在 <code>setTimeout</code> 內加上了 <code>Math.random()</code> 取亂數（會回傳 0~1 之間的值），並藉由判斷該亂數是否大於 0.5 來模擬兩種情況，當大於時代表成功，小於時代表失敗，當然！ <code>.catch</code> 也和 <code>.then</code> 相同，在沒有 Promise 內的 <code>reject</code> 呼叫下是不會執行的。</p>
<h2 id="Promise-進階用法"><a href="#Promise-進階用法" class="headerlink" title="Promise 進階用法"></a>Promise 進階用法</h2><p>經過基本用法，知道了 <code>.then</code> 能夠在 Promise 中以 resolve 做同步的執行呼叫，但是 <code>.then</code> 本身也可以擁有回傳值，並由下一個 <code>.then</code> 做接收，繼續執行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; resolve(<span class="string">'changed'</span>); &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);  <span class="comment">// 'changed'</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">'last changed'</span>;</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);  <span class="comment">// 'last changed'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>第二個 <code>.then</code> 會接收上一個 <code>.then</code> 的回傳值，並將它印出，但是需要注意的是，這種多個 <code>.then</code> 的用法，並不適用於同步執行，也就是說只要脫離了 Promise 就會回到非同步，例如以下例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; resolve(<span class="string">'changed'</span>); &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> newData = data;</span><br><span class="line">  setTimeout(</span><br><span class="line">    () =&gt; &#123; newData = <span class="string">'last changed'</span>; &#125;, <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">return</span> newData;</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data); <span class="comment">// 'changed'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>上方例子在第一個 <code>.then</code> 中使用 <code>setTimeout</code> 在 2 秒後改變 <code>newData</code> 的值並將他回傳，但執行後會發現，在第二個 <code>.then</code> 中出現在 console 上的還是舊值，並不會等到 <code>setTimeout</code> 執行完後才接著下一個 <code>.then</code>。</p>
<p>另外我們可以回傳另一個 Promise，來解決上方的問題：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lastPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; resolve(<span class="string">'last changed'</span>); &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; resolve(<span class="string">'changed'</span>); &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="keyword">return</span> lastPromise.then(<span class="function"><span class="params">lastData</span> =&gt;</span> lastData);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data); <span class="comment">// 'last changed'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在第一個 <code>.then</code> 的回傳了 <code>lastPromise</code> 的 <code>.then</code> 回傳的內容，也就是 <code>last changed</code>，因此最後一個 <code>.then</code> 接收到的 <code>data</code> 也會是 <code>last changed</code>。</p>
<p>上方例子也有需要注意的地方，那就是每個 Promise 都會有自己的生命週期，所以在 <code>lastPromise</code> 被建構出來的時候，就會開始進行 <code>pending</code> ，不會等到 <code>newPromise</code> 的第一個 <code>.then</code> 要求回傳資料時才開始執行 <code>setTimeout</code> 的 2 秒，因此上方程式的總執行時間並不會是兩個 <code>setTimeout</code> 加起來的時間 5 秒，而是 3 秒，因為記得我說過嗎？在 Promise 外，都是非同步的，所以兩個 Promise 在建構後的 <code>pending</code> 是非同步的。</p>
<p>如果需要將兩個 Promise 的執行也變成同步，那只需將上方的 <code>lastPromise</code> 置於 <code>newPromise</code> 的 <code>.then</code> 中就行了，如此一來就會變成 3 秒加上 2 秒的同步執行了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; resolve(<span class="string">'changed'</span>); &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">  <span class="comment">// 第二個Promise</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; resolve(<span class="string">`last <span class="subst">$&#123;data&#125;</span>`</span>); &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">lastData</span> =&gt;</span> lastData);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data); <span class="comment">// 'last changed'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>如此一來只有在進入 <code>newPromise</code> 的 <code>.then</code> 時，才會去新建構另一個 Promise 並利用他的 <code>.then</code> 回傳了一個新值，等到新建構的 Promise 生命週期結束後，才會執行 <code>newPromise</code> 最後一個 <code>.then</code>，不過這種方式會累加執行的時間，這是他需要注意的地方。</p>
<hr>
<p>以上是本篇對 Promise 的介紹，如果文章中有任何問題，或是不理解的地方，都可以留言告訴我！謝謝大家！</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ms314006" target="_blank" rel="noopener">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#認識-Promise"><span class="toc-number">1.</span> <span class="toc-text">認識 Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#非同步"><span class="toc-number">1.1.</span> <span class="toc-text">非同步</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise-基本用法"><span class="toc-number">2.</span> <span class="toc-text">Promise 基本用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise-進階用法"><span class="toc-number">3.</span> <span class="toc-text">Promise 進階用法</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2019/01/01/JavaScript-Promise/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&text=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&is_video=false&description=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=JavaScript | 從Promise開始承諾的部落格生活&body=Check out this article: http://yoursite.com/2019/01/01/JavaScript-Promise/" target="_blank" rel="noopener"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&title=JavaScript | 從Promise開始承諾的部落格生活" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2019/01/01/JavaScript-Promise/&name=JavaScript | 從Promise開始承諾的部落格生活&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 GQSM
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ms314006" target="_blank" rel="noopener">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
