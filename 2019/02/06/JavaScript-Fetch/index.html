<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學            &amp;#x4F7F;&amp;#x7528; fetch &amp;#x9032;&amp;#x884C;&amp;#x57FA;&amp;#x672C;&amp;#x7684; get &amp;#x8ACB;&amp;#x6C42;           前言「使用 Jquery 框架中的 Ajax 就能輕鬆做到了！」 「使用 Jquery 框架中的 Ajax 就能輕">
<meta name="keywords" content="JavaScript,Fetch">
<meta property="og:type" content="article">
<meta property="og:title" content="JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;02&#x2F;06&#x2F;JavaScript-Fetch&#x2F;index.html">
<meta property="og:site_name" content="神Ｑ超人">
<meta property="og:description" content="JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學            &amp;#x4F7F;&amp;#x7528; fetch &amp;#x9032;&amp;#x884C;&amp;#x57FA;&amp;#x672C;&amp;#x7684; get &amp;#x8ACB;&amp;#x6C42;           前言「使用 Jquery 框架中的 Ajax 就能輕鬆做到了！」 「使用 Jquery 框架中的 Ajax 就能輕">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;3748&#x2F;1*E1q2B3sbGZvT9P7_Dqd5vg.png">
<meta property="og:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;3212&#x2F;1*pTxI2uirqpdNK6OGrYNGag.png">
<meta property="og:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;4180&#x2F;1*JCATZx8-PiPLkL6E7RFtsg.png">
<meta property="og:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;4128&#x2F;1*beHToJ0Jz8dORnpfcearxA.png">
<meta property="og:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;3580&#x2F;1*uylPEmLS2Rx9M4BupxqzTQ.png">
<meta property="og:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;2416&#x2F;1*MzqoimOIofho6J2Mx0fDVA.png">
<meta property="og:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;2644&#x2F;1*ygaq1njimK3iiqmw2IXY_Q.png">
<meta property="og:updated_time" content="2019-11-28T23:37:44.245Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;miro.medium.com&#x2F;max&#x2F;3748&#x2F;1*E1q2B3sbGZvT9P7_Dqd5vg.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ms314006" target="_blank" rel="noopener">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/03/25/Jest-Basic-Tutorial/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/01/29/LintBot-Rich-Menus/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2019/02/06/JavaScript-Fetch/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&text=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&is_video=false&description=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學&body=Check out this article: http://yoursite.com/2019/02/06/JavaScript-Fetch/" target="_blank" rel="noopener"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&name=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JacaScript-Fetch-讓-ES6-擁有一對翅膀-基礎教學"><span class="toc-number">1.</span> <span class="toc-text">JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">2.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模組化（NPM-amp-Module）"><span class="toc-number">3.</span> <span class="toc-text">模組化（NPM &amp; Module）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch"><span class="toc-number">4.</span> <span class="toc-text">Fetch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GET"><span class="toc-number">4.1.</span> <span class="toc-text">GET</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POST"><span class="toc-number">4.2.</span> <span class="toc-text">POST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#請求失敗"><span class="toc-number">4.3.</span> <span class="toc-text">請求失敗</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">神Ｑ超人</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-02-06T02:37:36.000Z" itemprop="datePublished">2019-02-06</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Fetch/" rel="tag">Fetch</a>, <a class="tag-link" href="/tags/JavaScript/" rel="tag">JavaScript</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="JacaScript-Fetch-讓-ES6-擁有一對翅膀-基礎教學"><a href="#JacaScript-Fetch-讓-ES6-擁有一對翅膀-基礎教學" class="headerlink" title="JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學"></a>JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學</h2><p><img class="dz t u hi ak" src="https://miro.medium.com/max/3748/1*E1q2B3sbGZvT9P7_Dqd5vg.png" role="presentation"><div style="display:flex; justify-content:center; font-size: 12px"><br>            <span>&#x4F7F;&#x7528; fetch &#x9032;&#x884C;&#x57FA;&#x672C;&#x7684; get &#x8ACB;&#x6C42;</span><br>          </div><br/></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><span style="font-size: 26px; color: #696969; font-style:italic">「使用 Jquery 框架中的 Ajax 就能輕鬆做到了！」</span></p>
<p>「使用 <code class="hm jc jd je jf b">Jquery</code> 框架中的 <code class="hm jc jd je jf b">Ajax</code> 就能輕鬆做到了！」</p>
<p>莫約幾年前，在 <code class="hm jc jd je jf b">ES6</code> 已推出卻又還沒有普及的時候，如果有人提到：「如何用 <code class="hm jc jd je jf b">JavaScript</code> 向 <code class="hm jc jd je jf b">server</code> 請求資料？」，一定會有人這麼留言回答。</p>
<p>沒錯！ <code class="hm jc jd je jf b">$.ajax</code> 幾乎是最簡單又容易上手的請求方式了，不只在底層做了許多處理，也不必再向原生 <code class="hm jc jd je jf b">JavaScript</code> 中又臭又長的 <code class="hm jc jd je jf b">XMLHttpRequest()</code> 請求物件低頭，甚至還幫忙處理了同步執行的模式，使用起來就像這樣：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">'get'</span>,</span><br><span class="line">    url: <span class="string">'https://httpbin.org/get'</span>,</span><br><span class="line">    success: <span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>看起來很棒！對吧？但那都是幾年前了。</p>
<h2 id="模組化（NPM-amp-Module）"><a href="#模組化（NPM-amp-Module）" class="headerlink" title="模組化（NPM &amp; Module）"></a>模組化（NPM &amp; Module）</h2><p>近年前端工程在網頁上越來越吃重，投入前端框架的開發者（Developer）變多，讓以前一黨獨大的 <code class="hm jc jd je jf b">JQuery</code> 開始被多個許多小功能的框架給取代，因為 <code class="hm jc jd je jf b">JQuery</code> 擁有太多網站中用不到的 <code class="hm jc jd je jf b">function</code> ，但他們依然會被載入到網頁中。</p>
<p>面臨上述供給大於需求的情況，許多人便紛紛選擇只擁有自己需要功能的小框架，減少在 <code class="hm jc jd je jf b">Client</code> 端載入過多多餘的程式碼。</p>
<p>這些趨勢間接讓撰寫原生 <code class="hm jc jd je jf b">JavaScript</code> 的人直線增長，從 <code class="hm jc jd je jf b">ES6</code> 開始出現的 <code class="hm jc jd je jf b">Promise</code> 、 <code class="hm jc jd je jf b">Class</code> 許多新原生的語法出現，終於有一天， <code class="hm jc jd je jf b">XMLHttpRequest()</code> 請求開始走入歷史了（或是根本沒人認識他XD）…</p>
<hr>
<h2 id="Fetch"><a href="#Fetch" class="headerlink" title="Fetch"></a>Fetch</h2><p><code class="hm jc jd je jf b">Fetch</code> 是 <code class="hm jc jd je jf b">ES6</code> 的新語法，主要是搭配 <code class="hm jc jd je jf b">Promise</code> （<a class="dj by ka kb kc kd" target="_blank" rel="noopener" href="/enjoy-life-enjoy-coding/javascript-從promise開始承諾的部落格生活-e20dba78732f">Promise 的基本用法</a>）來執行請求網站和請求後獲取 <code class="hm jc jd je jf b">Response</code> 的處理方式。</p>
<p>以下範例的請求都會從 <a href="http://httpbin.org/" class="dj by ka kb kc kd" target="_blank" rel="noopener nofollow">httpbin.org</a> 這個網站裡挑選，它提供了各種不同的請求方式，在練習時是個很棒的工具。</p>
<h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><p><code class="hm jc jd je jf b">GET</code> 是請求中最基本的類型，在 <code class="hm jc jd je jf b">Fetch</code> 中預設的請求類型也是 <code class="hm jc jd je jf b">GET</code> 用起來就像下方：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'https://httpbin.org/get'</span>)</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response)</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line">        <span class="comment">//return response.text()</span></span><br><span class="line">    &#125;).then(<span class="function">(<span class="params">myJson</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(myJson)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p><code class="hm jc jd je jf b">Fetch</code> 接收了一個 <code class="hm jc jd je jf b">url</code> 作參數，並用 <code class="hm jc jd je jf b">then</code> 接收此次請求的相關資訊：</p>
<p><img class="dz t u hi ak" src="https://miro.medium.com/max/3212/1*pTxI2uirqpdNK6OGrYNGag.png" role="presentation"><div style="display:flex; justify-content:center; font-size: 12px"><br>            <span>&#x95DC;&#x65BC;&#x8A72;&#x6B64;&#x8ACB;&#x6C42;&#x7684; response &#x5167;&#x5BB9;</span><br>          </div><br/></p>
<p>資訊內包含了請求的 <code class="hm jc jd je jf b">url</code> 和用來判斷請求是否成功的 <code class="hm jc jd je jf b">status</code> 狀態等，在 <code class="hm jc jd je jf b">response</code> 中有兩個內建函式可以用來得到請求回傳的資料。</p>
<p>一個是上方 <code class="hm jc jd je jf b">then</code> 中 <code class="hm jc jd je jf b">return</code> 使用的 <code class="hm jc jd je jf b">.json()</code> ，能夠將回傳的資料以物件的方式傳給第二個 <code class="hm jc jd je jf b">then</code> 接收，另一個是 <code class="hm jc jd je jf b">.text()</code> ，當回傳的資料無法轉換為物件時，則會將請求資料以字串方式取出。</p>
<p>下方為第二個 <code class="hm jc jd je jf b">.then</code> 在 <code class="hm jc jd je jf b">console</code> 中印出的 <code class="hm jc jd je jf b">myJson</code> 內容，以及當使用 <code class="hm jc jd je jf b">.text()</code> 時的資料模樣：</p>
<p><img class="dz t u hi ak" src="https://miro.medium.com/max/4180/1*JCATZx8-PiPLkL6E7RFtsg.png" role="presentation"><div style="display:flex; justify-content:center; font-size: 12px"><br>            <span>&#x7528; .json() &#x5C07; response &#x7684;&#x8ACB;&#x6C42;&#x8CC7;&#x6599;&#x53D6;&#x51FA;</span><br>          </div><br/></p>
<p><img class="dz t u hi ak" src="https://miro.medium.com/max/4128/1*beHToJ0Jz8dORnpfcearxA.png" role="presentation"><div style="display:flex; justify-content:center; font-size: 12px"><br>            <span>&#x7528; .text() &#x5C07; response &#x7684;&#x8ACB;&#x6C42;&#x8CC7;&#x6599;&#x53D6;&#x51FA;</span><br>          </div><br/></p>
<h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><p>與 <code class="hm jc jd je jf b">GET</code> 不同的是，使用 <code class="hm jc jd je jf b">POST</code> 請求時需另外在 <code class="hm jc jd je jf b">method</code> 屬性內指定 <code class="hm jc jd je jf b">POST</code> 方式，且多了 <code class="hm jc jd je jf b">body</code> 屬性指定要送出的資料：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'https://httpbin.org/post'</span>, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    body: <span class="built_in">JSON</span>.stringify(</span><br><span class="line">        &#123;</span><br><span class="line">            name: <span class="string">'GQSM'</span>,</span><br><span class="line">            age: <span class="number">25</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> response.json()</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">myJson</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(myJson)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code class="hm jc jd je jf b">Fetch</code> 在未指定請求方式的情況下都是使用 <code class="hm jc jd je jf b">GET</code> ，但是 <code class="hm jc jd je jf b">GET</code> 本身無法在請求中藉由 <code class="hm jc jd je jf b">body</code> 送出資料，因此在有 <code class="hm jc jd je jf b">body</code> 屬性的狀態下，未替 <code class="hm jc jd je jf b">method</code> 指定為 <code class="hm jc jd je jf b">POST</code> 或其他可帶 <code class="hm jc jd je jf b">body</code> 的請求方式時，會出現以下錯誤：</p>
<p><img class="dz t u hi ak" src="https://miro.medium.com/max/3580/1*uylPEmLS2Rx9M4BupxqzTQ.png" role="presentation"><div style="display:flex; justify-content:center; font-size: 12px"><br>            <span>&#x9810;&#x8A2D;&#x7684;&#x8ACB;&#x6C42;&#x65B9;&#x5F0F; GET &#x7121;&#x6CD5;&#x6307;&#x5B9A; body</span><br>          </div><br/></p>
<p>需要注意的是， <code class="hm jc jd je jf b">body</code> 內的資料需使用 <code class="hm jc jd je jf b">JSON.stringify</code> 將物件轉換成字串型態，否則 <code class="hm jc jd je jf b">server</code> 端會無法正確取得資料，以下是 <code class="hm jc jd je jf b">data</code> 送進 <code class="hm jc jd je jf b">server</code> 的差別：</p>
<p><img class="dz t u hi ak" src="https://miro.medium.com/max/2416/1*MzqoimOIofho6J2Mx0fDVA.png" role="presentation"><div style="display:flex; justify-content:center; font-size: 12px"><br>            <span>&#x672A;&#x4F7F;&#x7528; JSON.stringify</span><br>          </div><br/></p>
<p><img class="dz t u hi ak" src="https://miro.medium.com/max/2644/1*ygaq1njimK3iiqmw2IXY_Q.png" role="presentation"><div style="display:flex; justify-content:center; font-size: 12px"><br>            <span>&#x4F7F;&#x7528;&#x4E86; JSON.stringify</span><br>          </div><br/></p>
<p>未使用 <code class="hm jc jd je jf b">JSON.stringify</code> 的請求會直接將物件強制轉為字串，變成 <code class="hm jc jd je jf b">[object Object]</code> 送至 <code class="hm jc jd je jf b">server</code> ，使用了正確轉換的請求在 <code class="hm jc jd je jf b">server</code> 端則是能接收到正確的內容。</p>
<h3 id="請求失敗"><a href="#請求失敗" class="headerlink" title="請求失敗"></a>請求失敗</h3><p>在 <code class="hm jc jd je jf b">Fetch</code> 中，請求失敗時不會有像 <code class="hm jc jd je jf b">$.ajax</code> 中有 <code class="hm jc jd je jf b">error</code> 可以直接捕捉，取而代之的是要以 <code class="hm jc jd je jf b">response</code> 的 <code class="hm jc jd je jf b">status</code> 的屬性值判斷，當 <code class="hm jc jd je jf b">status</code> 的值不等於 <code class="hm jc jd je jf b">200</code> 時，將在 <code class="hm jc jd je jf b">.then</code> 中使用 <code class="hm jc jd je jf b">throw</code> 創建一個錯誤，並由 <code class="hm jc jd je jf b">.catch</code> 接收錯誤內容處理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'https://httpbin.org/status/500'</span>, &#123;</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(response.status !== <span class="number">200</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.status)</span><br><span class="line">    <span class="keyword">return</span> response.json()</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">myJson</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(myJson)</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`錯誤代碼為<span class="subst">$&#123;error&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<p>本文介紹了 <code class="hm jc jd je jf b">Fetch</code> 的基本用法及請求錯誤時的捕捉方式，雖然寫起來未必比 <code class="hm jc jd je jf b">$ajax</code> 還要簡單，但是從此以後也多了不需掛載 <code class="hm jc jd je jf b">JQuery</code> 轉為使用原生請求的選擇，唯一需要考量的是 <code class="hm jc jd je jf b">Fetch</code> 和 <code class="hm jc jd je jf b">Promise</code> 在瀏覽器上的支援度還太低，當換到 <code class="hm jc jd je jf b">IE</code> 時便完全無法使用。</p>
<p>不過就如前言所說的，目前投入前端框架的開發者有太多了，將來也會介紹筆者目前對處理請求使用的框架 <code class="hm jc jd je jf b">axios</code> ， <code class="hm jc jd je jf b">axios</code> 的使用方式和 <code class="hm jc jd je jf b">Fetch</code> 大同小異，在不考慮 <code class="hm jc jd je jf b">Promise</code> 的情況下，大幅度提高了瀏覽器的支援性，至少在 <code class="hm jc jd je jf b">IE11</code> 上也變得能夠使用，有興趣可以先至 <a href="https://github.com/axios/axios" class="dj by ka kb kc kd" target="_blank" rel="noopener nofollow">GitHub 上查看文檔</a>。</p>
<p>如果以上內容有任何問題，或是不理解的地方，都歡迎留言告訴我，謝謝大家！</p>
<p>參考文章</p>
<ol>
<li id="cf48" class="in io em at iq b ir is it iu iv iw ix iy iz ja jb lc ld le"><a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Fetch_API/Using_Fetch#Body" class="dj by ka kb kc kd" target="_blank" rel="noopener nofollow">https://developer.mozilla.org/zh-TW/docs/Web/API/Fetch_API/Using_Fetch#Body</a></li><li id="b18f" class="in io em at iq b ir lf it lg iv lh ix li iz lj jb lc ld le"><a href="https://wcc723.github.io/javascript/2017/12/28/javascript-fetch/" class="dj by ka kb kc kd" target="_blank" rel="noopener nofollow">https://wcc723.github.io/javascript/2017/12/28/javascript-fetch/</a></li>
</ol>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ms314006" target="_blank" rel="noopener">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JacaScript-Fetch-讓-ES6-擁有一對翅膀-基礎教學"><span class="toc-number">1.</span> <span class="toc-text">JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">2.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模組化（NPM-amp-Module）"><span class="toc-number">3.</span> <span class="toc-text">模組化（NPM &amp; Module）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch"><span class="toc-number">4.</span> <span class="toc-text">Fetch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GET"><span class="toc-number">4.1.</span> <span class="toc-text">GET</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POST"><span class="toc-number">4.2.</span> <span class="toc-text">POST</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#請求失敗"><span class="toc-number">4.3.</span> <span class="toc-text">請求失敗</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2019/02/06/JavaScript-Fetch/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&text=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&is_video=false&description=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學&body=Check out this article: http://yoursite.com/2019/02/06/JavaScript-Fetch/" target="_blank" rel="noopener"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&title=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2019/02/06/JavaScript-Fetch/&name=JacaScript | Fetch 讓 ES6 擁有一對翅膀-基礎教學&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 GQSM
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/ms314006" target="_blank" rel="noopener">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
